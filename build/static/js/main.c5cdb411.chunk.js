(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{1087:function(e,t,n){"use strict";n.r(t);n(30);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),s=n(16),i=n(17),l=n(5),u=n(7),p=n(6),d=n(8),m=n(11),f=n(12),h=n(25),E=n.n(h),b=n(10),g=n(26),j=n.n(g),v=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"LandingPage"},r.a.createElement("h2",null,"Adopt Pets"),r.a.createElement("img",{src:j.a,alt:"pets"}),r.a.createElement(m.b,{to:"/adoption"},r.a.createElement("button",{type:"button",className:"btn"},"Start Adopting")))}}]),t}(a.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(m.b,{to:"/"},r.a.createElement("h1",null,"Petful")),r.a.createElement(v,null))}}]),t}(a.Component);function C(e){var t=e.pet,n=t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"left-panel"},r.a.createElement("h3",{className:"pet-info"},t.name),r.a.createElement("div",{className:"pet-info"},"age  |  ".concat(t.age)),r.a.createElement("div",{className:"pet-info"},"gender  |  ".concat(t.gender)),r.a.createElement("div",{className:"pet-info"},"breed  |  ".concat(t.breed)),r.a.createElement("div",{className:"pet-info"},"description  |  ".concat(t.description)),r.a.createElement("div",{className:"pet-info"},"story  |  ".concat(t.story))),r.a.createElement("div",{className:"right-panel"},r.a.createElement("img",{src:t.imageURL,alt:"picture_of_".concat(t.name)}))):"Loading...";return r.a.createElement("div",{className:"PetCard"},n)}var N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).renderCatCard=function(e){return r.a.createElement(C,{pet:e})},n.renderDogCard=function(e){return r.a.createElement(C,{pet:e})},n.renderAdopterQueue=function(e){var t=e.map((function(e,t){return r.a.createElement("li",{key:t,className:"nameTag"},e)}));return r.a.createElement("ol",null,t)},n.handleSubmit=function(e){e.preventDefault();var t=e.target.name.value;n.props.handleNewAdopter(t,!0)},n.renderEnterLineForm=function(){return r.a.createElement("form",{onSubmit:n.handleSubmit},r.a.createElement("label",{htmlFor:"name-input",className:"form-label"},"Enter The Line:"),r.a.createElement("input",{required:!0,id:"name-input",placeholder:"Your name",name:"name"}),r.a.createElement("button",{type:"submit",className:"btn"},"Join The Line"))},n.renderAdoptDogButton=function(e){return e?r.a.createElement("button",{type:"button",className:"btn",onClick:function(){n.props.handleAdoptionClick("dog")}},"Adopt!"):""},n.renderAdoptCatButton=function(e){return e?r.a.createElement("button",{type:"button",className:"btn",onClick:function(){n.props.handleAdoptionClick("cat")}},"Adopt!"):""},n.renderAdoptionCongrats=function(e){return""===e?"":r.a.createElement("p",null,"Congrats and thank you for adopting ".concat(e,"!"))},n}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.pets,t=e.dogs,n=e.cats,a=this.props,o=a.people,c=a.clientUser,s=a.displayCongrats,i=t[0],l=n[0],u=o[0]===c,p=this.renderDogCard(i),d=this.renderCatCard(l),m=this.renderAdopterQueue(o),f=this.renderEnterLineForm(),h=this.renderAdoptDogButton(u),E=this.renderAdoptCatButton(u),b=this.renderAdoptionCongrats(s);return r.a.createElement("div",{className:"AdoptionPage"},"Queue:",m,f,b,p,h,d,E)}}]),t}(a.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.pets,a=t.people,o=t.clientUser,c=t.displayCongrats;return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(m.b,{to:"/"},r.a.createElement("h1",null,"Petful")),r.a.createElement(N,{handleNewAdopter:function(t,n){return e.props.handleNewAdopter(t,n)},pets:n,people:a,clientUser:o,handleAdoptionClick:function(t){return e.props.handleAdoptionClick(t)},displayCongrats:c}))}}]),t}(a.Component),y=n(2),A=n.n(y),k=n(13),w={API_ENDPOINT:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_ENDPOINT||"http://localhost:8080"}.API_ENDPOINT,T={getPeople:function(){return Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/people"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))()},postPerson:function(e){return Object(k.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(w,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({person:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},removePerson:function(){return Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/people"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))()},getPets:function(){return Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/pets"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))()},getCat:function(){return Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/pets/cat"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))()},getDog:function(){return Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/pets/dog"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))()},deletePet:function(e){return Object(k.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(w,"/pets/").concat(e),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return t.stop()}}),t)})))()}},S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={pets:{cats:[],dogs:[]},people:[],loading:!0},n.componentDidMount=function(){if(n.state.loading){var e={pets:{cats:[],dogs:[]},people:[],clientUser:"",displayCongrats:"",interval:null,loading:!1};T.getPets().then((function(t){e.pets=Object(i.a)({},t),T.getPeople().then((function(t){e.people=t,n.setState(Object(i.a)({},e))})).catch((function(e){console.log("PEOPLE FETCH ERROR: ",e)}))})).catch((function(e){console.log("PET FETCH ERROR: ",e)}))}},n.toggleLoading=function(){n.setState({loading:!0})},n.adopt=function(e){Promise.all([T.deletePet(e),T.removePerson()]).then((function(t){var a={pets:{cats:"cat"===e?n.state.pets.cats.slice(1):Object(s.a)(n.state.pets.cats),dogs:"dog"===e?n.state.pets.dogs.slice(1):Object(s.a)(n.state.pets.dogs)},people:n.state.people.slice(1)};n.setState(Object(i.a)({},a))})).catch((function(e){console.log(e)}))},n.handleAdoptionClick=function(e){var t="dog"===e?n.state.pets.dogs[0].name:n.state.pets.cats[0].name;n.adopt(e),n.stopInterval(),n.setState({clientUser:"",displayCongrats:t})},n.startInterval=function(){var e=setInterval((function(){if(n.state.people[0]===n.state.clientUser);else{var e=Math.round(Math.random())?"cat":"dog";n.adopt(e)}if(n.state.people.length<5){var t=E.a.name.findName();n.handleNewAdopter(t,!1)}}),5e3);n.setState({interval:e})},n.stopInterval=function(){clearInterval(n.state.interval),n.setState({interval:null})},n.handleNewAdopter=function(e,t){T.postPerson(e).then((function(a){var r=t?e:n.state.clientUser;t&&!n.state.interval&&n.startInterval(),n.setState({people:[].concat(Object(s.a)(n.state.people),[e]),clientUser:r})})).catch((function(e){console.log(e)}))},n.render=function(){var e=n.state,t=e.pets,a=e.people,o=e.clientUser,c=e.displayCongrats;return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement(O,null)}}),r.a.createElement(f.a,{path:"/adoption",render:function(){return r.a.createElement(P,{handleNewAdopter:function(e,t){return n.handleNewAdopter(e,t)},pets:t,people:a,clientUser:o,handleAdoptionClick:function(e){return n.handleAdoptionClick(e)},displayCongrats:c})}}))))},n}return Object(d.a)(t,e),t}(a.Component);var D=function(){return r.a.createElement(S,null)};c.a.render(r.a.createElement(D,null),document.getElementById("root"))},26:function(e,t,n){e.exports=n.p+"static/media/pets.edaa8743.jpg"},29:function(e,t,n){e.exports=n(1087)},30:function(e,t,n){}},[[29,1,2]]]);
//# sourceMappingURL=main.c5cdb411.chunk.js.map